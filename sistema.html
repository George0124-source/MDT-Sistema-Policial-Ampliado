<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>MDT - Terminal Operativo</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body style="background: #0a0f1d; color: white;">

    <header>
        <div><i class="fas fa-shield-alt"></i> SISTEMA MDT - POLICÍA NACIONAL</div>
        <div id="badge-area" style="color: var(--cnp-gold); font-weight: bold;"></div>
    </header>

    <div class="sidebar">
        <div class="nav-item active" onclick="verSec('busqueda')"><i class="fas fa-search"></i> Búsqueda</div>
        <div class="nav-item" onclick="verSec('penal')"><i class="fas fa-gavel"></i> Código Penal</div>
        <div class="nav-item" style="color: #f87171;" onclick="abrirStaff()"><i class="fas fa-user-shield"></i> STAFF - ALTO RANGO</div>
        <div class="nav-item" onclick="location.href='index.html'" style="margin-top: 50px;"><i class="fas fa-power-off"></i> Desconexión</div>
    </div>

    <div class="main-content">
        <!-- SECCION BUSQUEDA -->
        <div id="sec-busqueda">
            <h1>Terminal de Consulta Ciudadana</h1>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <input type="text" id="input-busqueda" placeholder="Ingrese DNI..." style="padding:15px; width:400px; background:#1e293b; border:none; color:white;">
                <button onclick="window.buscarCiudadanoPol()" class="btn-auth" style="width:150px; margin:0;">BUSCAR</button>
            </div>
            <div id="resultados-busqueda" style="margin-top:30px;"></div>
        </div>

        <!-- SECCION STAFF (OCULTA POR DEFECTO) -->
        <div id="sec-staff" class="hidden">
            <h1 style="color:var(--cnp-gold)">Gestión de Personal - Alto Rango</h1>
            <p>Desde aquí puede autorizar nuevas placas de agentes.</p>
            <button class="btn-auth" onclick="window.anadirNuevaPlaca()" style="width:250px; margin-top:20px;">+ AÑADIR NUEVA PLACA</button>
            <div id="lista-agentes-admin" style="margin-top:30px; max-width:500px;"></div>
        </div>
    </div>

    <script type="module" src="main.js"></script>
    <script>
        const user = JSON.parse(localStorage.getItem('agenteActivo'));
        if(!user) window.location.href="index.html";
        document.getElementById('badge-area').innerText = user.rango + " | " + user.placa;

        function verSec(id) {
            document.getElementById('sec-busqueda').classList.add('hidden');
            document.getElementById('sec-staff').classList.add('hidden');
            document.getElementById('sec-' + id).classList.remove('hidden');
        }

        function abrirStaff() {
            const p = prompt("ACCESO RESTRINGIDO. Ingrese Contraseña Staff:");
            if(p === "CupulaFundadoraPeninsula0124") {
                verSec('staff');
                window.cargarAgentesStaff();
            } else {
                alert("ALERTA: Intento de acceso no autorizado registrado.");
            }
        }
    </script>
</body>
</html>
